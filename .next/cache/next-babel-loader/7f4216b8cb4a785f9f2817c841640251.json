{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nexport var findLatestDate = function findLatestDate(commits) {\n  if (!commits.length) return;\n  var latestCommit = commits[0];\n  return latestCommit.commit.author.date;\n};\nexport var fetchCommits = function fetchCommits(branch) {\n  var sinceDate,\n      result,\n      _args = arguments;\n  return _regeneratorRuntime.async(function fetchCommits$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          sinceDate = _args.length > 1 && _args[1] !== undefined ? _args[1] : \"\";\n          console.log(\"fetchCOmmits\", branch, sinceDate);\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(fetch(\"https://api.github.com/repos/eduardocastaneda/timereporting/commits?per_page=100&sha=\".concat(branch, \"&since=\").concat(sinceDate), {\n            headers: {\n              Authorization: \"token \".concat(process.env.GITHUB_TOKEN)\n            }\n          }));\n\n        case 4:\n          result = _context.sent;\n          return _context.abrupt(\"return\", result.json());\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};","map":{"version":3,"sources":["/Users/eduardocastaneda/Projekt/privat/gitdiff/lib/helpers/commits.js"],"names":["findLatestDate","commits","length","latestCommit","commit","author","date","fetchCommits","branch","sinceDate","console","log","fetch","headers","Authorization","process","env","GITHUB_TOKEN","result","json"],"mappings":";AAAA,OAAO,IAAMA,cAAc,GAAG,SAAjBA,cAAiB,CAACC,OAAD,EAAa;AACzC,MAAI,CAACA,OAAO,CAACC,MAAb,EAAqB;AAErB,MAAMC,YAAY,GAAGF,OAAO,CAAC,CAAD,CAA5B;AAEA,SAAOE,YAAY,CAACC,MAAb,CAAoBC,MAApB,CAA2BC,IAAlC;AACD,CANM;AAQP,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAOC,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAeC,UAAAA,SAAf,2DAA2B,EAA3B;AAC1BC,UAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BH,MAA5B,EAAoCC,SAApC;AAD0B;AAAA,2CAELG,KAAK,gGACgEJ,MADhE,oBACgFC,SADhF,GAExB;AACEI,YAAAA,OAAO,EAAE;AACPC,cAAAA,aAAa,kBAAWC,OAAO,CAACC,GAAR,CAAYC,YAAvB;AADN;AADX,WAFwB,CAFA;;AAAA;AAEpBC,UAAAA,MAFoB;AAAA,2CAWnBA,MAAM,CAACC,IAAP,EAXmB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAArB","sourcesContent":["export const findLatestDate = (commits) => {\n  if (!commits.length) return;\n\n  const latestCommit = commits[0];\n\n  return latestCommit.commit.author.date;\n};\n\nexport const fetchCommits = async (branch, sinceDate = \"\") => {\n  console.log(\"fetchCOmmits\", branch, sinceDate);\n  const result = await fetch(\n    `https://api.github.com/repos/eduardocastaneda/timereporting/commits?per_page=100&sha=${branch}&since=${sinceDate}`,\n    {\n      headers: {\n        Authorization: `token ${process.env.GITHUB_TOKEN}`\n      }\n    }\n  );\n\n  return result.json();\n};\n"]},"metadata":{},"sourceType":"module"}